{% load i18n %}

{% get_current_language as LANGUAGE_CODE %}
{% get_available_languages as LANGUAGES %}
{% get_language_info_list for LANGUAGES as languages %}
<form action="{% url 'set_language' %}"
      class="flex flex-row items-center justify-center space-x-2"
      data-turbo="false"
      method="post">
  {% csrf_token %}
  <input name="next" type="hidden" value="{{ redirect_to }}">
  <div class="control has-icons-left">
    <div class="select is-rounded">
      <select class="" name="language" onchange="this.form.submit()">
        {% for language in languages %}
          <option value="{{ language.code }}"{% if language.code == LANGUAGE_CODE %} selected{% endif %}>
            {{ language.name_local|title }}
          </option>
        {% endfor %}
      </select>
    </div>
    <div class="icon is-small is-left">
      <i class="fa fa-globe"></i>
    </div>
  </div>
</form>
